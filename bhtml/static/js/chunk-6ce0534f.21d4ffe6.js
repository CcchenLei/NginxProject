(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ce0534f"],{"0db9":function(t,e,a){"use strict";a("9592")},"542f":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"text item"},[a("Category",{on:{getCategoryID:t.getBaseAttr}})],1)]),a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"text item"},[a("el-button",{directives:[{name:"show",rawName:"v-show",value:t.AttrData.categoryId,expression:"AttrData.categoryId"}],staticStyle:{"margin-bottom":"15px"},attrs:{type:"primary",plain:"",icon:"el-icon-plus"},on:{click:t.addAttr}},[t._v("添加属性")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isShowLoading,expression:"isShowLoading"}],staticStyle:{width:"100%"},attrs:{border:"",data:t.Attrlist}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center"}}),a("el-table-column",{attrs:{prop:"attrName",label:"属性名称",width:"180",align:"center"}}),a("el-table-column",{attrs:{prop:"prop",label:"属性值列表"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return t._l(r.attrValueList,(function(e){return a("el-tag",{key:e.id,staticStyle:{margin:"0 10px"}},[t._v(" "+t._s(e.valueName)+" ")])}))}}])}),a("el-table-column",{attrs:{prop:"address",label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[a("el-button",{staticClass:"el-icon-edit",attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.updataAttr(r)}}},[t._v("修改")]),a("el-popconfirm",{attrs:{title:"这是一段内容确定删除吗？"},on:{onConfirm:function(e){return t.deleteAttr(r)}}},[a("el-button",{staticClass:"el-icon-delete",attrs:{slot:"reference",type:"danger",size:"mini"},slot:"reference"},[t._v("删除")])],1)]}}])})],1)],1)]),a("el-dialog",{attrs:{title:"添加属性",visible:t.isShowDialog},on:{"update:visible":function(e){t.isShowDialog=e},close:t.closeDialog}},[a("el-form",[a("el-form-item",{staticStyle:{width:"300px"},attrs:{label:"属性名","label-width":"55px"}},[a("el-input",{staticStyle:{height:"20px"},attrs:{autocomplete:"off"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addAttrlist(e)}},model:{value:t.AttrData.attrName,callback:function(e){t.$set(t.AttrData,"attrName",e)},expression:"AttrData.attrName"}})],1),a("el-button",{ref:"addAttrBtn",staticClass:"el-icon-plus",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",disabled:!t.AttrData.attrName,title:t.message},on:{click:t.addAttrlist}},[t._v("添加属性值")]),a("el-button",{attrs:{type:"info"}},[t._v("取消")]),a("el-table",{staticStyle:{width:"100%",margin:"10px 0 0 10px"},attrs:{border:"",data:t.AttrData.attrValueList}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center"}}),a("el-table-column",{attrs:{prop:"prop",label:"属性值",align:"center",width:"width"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row,n=e.index;return[r.flag?a("el-input",{ref:"newInput",attrs:{autocomplete:"off",placeholder:"请输入属性值"},on:{blur:function(e){return t.showSpan(r,n)}},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.showSpan(r,n)}},model:{value:r.valueName,callback:function(e){t.$set(r,"valueName",e)},expression:"row.valueName"}}):r.flag||r.valueName?a("span",{staticClass:"attrSpan",on:{click:function(e){return t.showInput(r)}}},[t._v(" "+t._s(r.valueName))]):a("span",{staticStyle:{color:"red"},on:{click:function(e){return t.showInput(r)}}},[t._v(" !请务必输入新的属性值")])]}}])}),a("el-table-column",{attrs:{prop:"operate",label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row,n=e.index;return[a("el-popconfirm",{attrs:{title:"你确定删除"+r.valueName+"该属性值吗?"},on:{onConfirm:function(e){return t.deleteAttrValueName(n)}}},[a("el-button",{staticClass:"el-icon-delete",attrs:{slot:"reference",type:"danger",size:"mini"},slot:"reference"},[t._v("删除")])],1)]}}])})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelAdding}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:this.AttrData.attrValueList.length<1},on:{click:t.saveNewAttr}},[t._v("保 存")])],1)],1)],1)},n=[],i=a("c7eb"),s=a("1da1"),o=(a("e9c4"),a("d3b7"),a("159b"),a("a434"),a("4de4"),{name:"Attr",data:function(){return{message:"请先输入属性名",isShowLoading:!1,isShowDialog:!1,Attrlist:[],categoryId:{category1Id:"",category2Id:"",category3Id:""},attrId:"",AttrData:{attrName:"",attrValueList:[],categoryId:"",categoryLevel:3}}},methods:{getBaseAttr:function(t){var e=this;return Object(s["a"])(Object(i["a"])().mark((function a(){var r;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(console.log(t),e.categoryId.category1Id=t.category1Id,e.categoryId.category2Id=t.category2Id,e.categoryId.category3Id=t.category3Id,e.AttrData.categoryId=t.category3Id,e.Attrlist=[],!t.category3Id){a.next=12;break}return e.isShowLoading=!0,a.next=10,e.$API.attr.reqShopBaseAttr(t.category1Id,t.category2Id,t.category3Id);case 10:r=a.sent,200==r.code&&(e.isShowLoading=!1,e.Attrlist=r.data);case 12:case"end":return a.stop()}}),a)})))()},addAttr:function(){this.isShowDialog=!0,this.attrId=Math.floor(1e4*Math.random()+1)},addAttrlist:function(){var t=this;this.AttrData.attrValueList.push({attrId:this.attrId,valueName:"",flag:!0}),this.$nextTick((function(){t.$refs.newInput.focus()}))},updataAttr:function(t){var e=this;this.isShowDialog=!0,this.AttrData=JSON.parse(JSON.stringify(t)),this.AttrData.attrValueList.forEach((function(t){e.$set(t,"flag",!1)}))},deleteAttr:function(t){var e=this;return Object(s["a"])(Object(i["a"])().mark((function a(){var r;return Object(i["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return console.log(t),a.next=3,e.$API.attr.reqDeleteAttr(t.attrValueList[0].attrId);case 3:r=a.sent,200==r.code?(e.getBaseAttr(e.categoryId),e.$message({type:"success",message:"删除成功"})):e.$message({type:"warning",message:"删除失败"});case 5:case"end":return a.stop()}}),a)})))()},deleteAttrValueName:function(t){this.AttrData.attrValueList.splice(t,1)},cancelAdding:function(){this.isShowDialog=!1},saveNewAttr:function(){var t=this;return Object(s["a"])(Object(i["a"])().mark((function e(){var a,r;return Object(i["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.AttrData.attrValueList.some((function(t){return!t.valueName})),!a){e.next=5;break}t.$message({type:"warning",message:"属性值不能为空"}),e.next=9;break;case 5:return e.next=7,t.$API.attr.reqSaveAttr(t.AttrData);case 7:r=e.sent,200==r.code?(t.closeDialog(),t.getBaseAttr(t.categoryId),t.$message({type:"success",message:"添加成功"})):(t.closeDialog(),t.$message({type:"warning",message:"添加失败"}));case 9:case"end":return e.stop()}}),e)})))()},showSpan:function(t){var e=this;this.AttrData.attrValueList.forEach((function(a){a!==t&&a.valueName==t.valueName?e.AttrData.attrValueList=e.AttrData.attrValueList.filter((function(e){return e!==t})):t.flag=!1}))},showInput:function(t){var e=this;t.flag=!0,this.$nextTick((function(){e.$refs.newInput.focus()}))},closeDialog:function(){this.isShowDialog=!1,this.AttrData.attrName=void 0,this.AttrData.attrValueList=[]}},watch:{"AttrData.attrName":function(t){this.message=t?"添加属性值":"请先输入属性名"}}}),l=o,c=(a("0db9"),a("2877")),u=Object(c["a"])(l,r,n,!1,null,null,null);e["default"]=u.exports},9592:function(t,e,a){},a434:function(t,e,a){"use strict";var r=a("23e7"),n=a("23cb"),i=a("a691"),s=a("50c4"),o=a("7b0b"),l=a("65f0"),c=a("8418"),u=a("1dde"),d=a("ae40"),f=u("splice"),p=d("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,h=Math.min,m=9007199254740991,y="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!f||!p},{splice:function(t,e){var a,r,u,d,f,p,v=o(this),w=s(v.length),b=n(t,w),A=arguments.length;if(0===A?a=r=0:1===A?(a=0,r=w-b):(a=A-2,r=h(g(i(e),0),w-b)),w+a-r>m)throw TypeError(y);for(u=l(v,r),d=0;d<r;d++)f=b+d,f in v&&c(u,d,v[f]);if(u.length=r,a<r){for(d=b;d<w-r;d++)f=d+r,p=d+a,f in v?v[p]=v[f]:delete v[p];for(d=w;d>w-r+a;d--)delete v[d-1]}else if(a>r)for(d=w-r;d>b;d--)f=d+r-1,p=d+a-1,f in v?v[p]=v[f]:delete v[p];for(d=0;d<a;d++)v[d+b]=arguments[d+2];return v.length=w-r+a,u}})},e9c4:function(t,e,a){var r=a("23e7"),n=a("d066"),i=a("d039"),s=n("JSON","stringify"),o=/[\uD800-\uDFFF]/g,l=/^[\uD800-\uDBFF]$/,c=/^[\uDC00-\uDFFF]$/,u=function(t,e,a){var r=a.charAt(e-1),n=a.charAt(e+1);return l.test(t)&&!c.test(n)||c.test(t)&&!l.test(r)?"\\u"+t.charCodeAt(0).toString(16):t},d=i((function(){return'"\\udf06\\ud834"'!==s("\udf06\ud834")||'"\\udead"'!==s("\udead")}));s&&r({target:"JSON",stat:!0,forced:d},{stringify:function(t,e,a){var r=s.apply(null,arguments);return"string"==typeof r?r.replace(o,u):r}})}}]);