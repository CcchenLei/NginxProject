(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c1d17"],{4852:function(e,t,n){"use strict";n.r(t);var s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.menuList,"row-key":"id",border:"","expand-row-keys":["1"]}},[n("el-table-column",{attrs:{prop:"name",label:"名称"}}),n("el-table-column",{attrs:{prop:"code",label:"权限值"}}),n("el-table-column",{attrs:{prop:"toCode",label:"跳转权限值"}}),n("el-table-column",{attrs:{prop:"do",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var s=t.row;return[n("el-button",{attrs:{type:"primary",icon:"el-icon-plus",disabled:4===s.level},on:{click:function(t){return e.addMenu(s)}}}),n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",disabled:s.level<=2},on:{click:function(t){return e.editMenu(s)}}}),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",disabled:s.level<=2},on:{click:function(t){return e.deleteMenu(s)}}})]}}])})],1),n("el-dialog",{attrs:{title:e.dialogTitle,visible:e.addOrEditMenuDialog},on:{"update:visible":function(t){e.addOrEditMenuDialog=t},closed:e.resetData}},[n("el-form",{ref:"permission",staticClass:"demo-ruleForm",attrs:{"label-width":"100px",modal:e.permission}},[e.permission.level>2&&!e.permission.id?n("el-form-item",{attrs:{label:"父级名称"}},[n("el-input",{staticStyle:{width:"600px"},attrs:{value:e.permission.pname,disabled:!0}})],1):e._e(),n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入名称"},model:{value:e.permission.name,callback:function(t){e.$set(e.permission,"name",t)},expression:"permission.name"}})],1),n("el-form-item",{attrs:{label:"权限值",prop:"code"}},[n("el-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入功能权限值"},model:{value:e.permission.code,callback:function(t){e.$set(e.permission,"code",t)},expression:"permission.code"}})],1),4===e.permission.level?n("el-form-item",{attrs:{label:"跳转权限值",prop:"toCode"}},[n("el-input",{staticStyle:{width:"600px"},attrs:{placeholder:"请输入跳转功能权限值"},model:{value:e.permission.toCode,callback:function(t){e.$set(e.permission,"toCode",t)},expression:"permission.toCode"}})],1):e._e()],1),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.resetData}},[e._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:e.saveMenuInfo}},[e._v("确 定")])],1)],1)],1)},i=[];n("a4d3"),n("b64b");function a(e,t){if(null==e)return{};var n,s,i={},a=Object.keys(e);for(s=0;s<a.length;s++)n=a[s],t.indexOf(n)>=0||(i[n]=e[n]);return i}function r(e,t){if(null==e)return{};var n,s,i=a(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var o=n("5530"),l=n("c7eb"),c=n("1da1"),u=(n("b0c0"),["pname"]),d={name:"",data:function(){return{addOrEditMenuDialog:!1,menuList:[],permission:{name:"",level:0,code:"",toCode:""}}},methods:{getMenuList:function(){var e=this;return Object(c["a"])(Object(l["a"])().mark((function t(){var n;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$API.menu.getmenuList();case 2:n=t.sent,2e4==n.code&&(e.menuList=n.data.children);case 4:case"end":return t.stop()}}),t)})))()},addMenu:function(e){this.addOrEditMenuDialog=!0,this.permission.pname=e.name,this.permission.level=e.level+1,this.permission.pid=e.id,this.permission.type=4===this.permission.level?2:1},editMenu:function(e){this.addOrEditMenuDialog=!0,this.permission=Object(o["a"])({},e),this.permission.type=4===this.permission.level?2:1},saveMenuInfo:function(){var e=this;this.$refs.permission.validate(function(){var t=Object(c["a"])(Object(l["a"])().mark((function t(n){var s,i,a,o;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!n){t.next=15;break}if(s=e.permission,s.pname,i=r(s,u),!i.id){t.next=9;break}return t.next=5,e.$API.menu.updateMenu(i);case 5:a=t.sent,2e4==a.code?e.$message({type:"success",message:"修改成功"}):e.$message({type:"warning",message:"修改失败"}),t.next=13;break;case 9:return t.next=11,e.$API.menu.addMenu(i);case 11:o=t.sent,2e4==o.code?e.$message({type:"success",message:"添加成功"}):e.$message({type:"warning",message:"添加失败"});case 13:e.getMenuList(),e.resetData();case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},deleteMenu:function(e){var t=this;return Object(c["a"])(Object(l["a"])().mark((function n(){var s;return Object(l["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$API.menu.deleteMenu(e.id);case 2:s=n.sent,2e4==s.code?t.$message({type:"success",message:"删除成功"}):t.$message({type:"warning",message:"删除失败"}),t.getMenuList(),t.resetData();case 6:case"end":return n.stop()}}),n)})))()},resetData:function(){this.addOrEditMenuDialog=!1,this.permission=this.$options.data().permission}},mounted:function(){this.getMenuList()},computed:{dialogTitle:function(){var e=this.permission,t=e.level,n=e.id;return n?4==t?"修改功能":"修改菜单":4==t?"添加功能":"添加".concat(2==t?"一级":"二级","菜单")}}},p=d,m=n("2877"),b=Object(m["a"])(p,s,i,!1,null,null,null);t["default"]=b.exports}}]);