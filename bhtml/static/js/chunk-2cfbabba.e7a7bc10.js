(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2cfbabba"],{"06c5":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a("fb6a"),a("d3b7"),a("b0c0"),a("a630"),a("3ca3"),a("ac1f"),a("00b4");var r=a("6b75");function s(e,t){if(e){if("string"===typeof e)return Object(r["a"])(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(r["a"])(e,t):void 0}}},"4df4":function(e,t,a){"use strict";var r=a("0366"),s=a("7b0b"),n=a("9bdd"),i=a("e95a"),l=a("50c4"),o=a("8418"),u=a("35a1");e.exports=function(e){var t,a,c,d,p,f,m=s(e),g="function"==typeof this?this:Array,h=arguments.length,b=h>1?arguments[1]:void 0,I=void 0!==b,S=u(m),v=0;if(I&&(b=r(b,h>2?arguments[2]:void 0,2)),void 0==S||g==Array&&i(S))for(t=l(m.length),a=new g(t);t>v;v++)f=I?b(m[v],v):m[v],o(a,v,f);else for(d=S.call(m),p=d.next,a=new g;!(c=p.call(d)).done;v++)f=I?n(d,b,[c.value,v],!0):c.value,o(a,v,f);return a.length=v,a}},"6b75":function(e,t,a){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}a.d(t,"a",(function(){return r}))},"82d7":function(e,t,a){},a434:function(e,t,a){"use strict";var r=a("23e7"),s=a("23cb"),n=a("a691"),i=a("50c4"),l=a("7b0b"),o=a("65f0"),u=a("8418"),c=a("1dde"),d=a("ae40"),p=c("splice"),f=d("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,g=Math.min,h=9007199254740991,b="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!p||!f},{splice:function(e,t){var a,r,c,d,p,f,I=l(this),S=i(I.length),v=s(e,S),k=arguments.length;if(0===k?a=r=0:1===k?(a=0,r=S-v):(a=k-2,r=g(m(n(t),0),S-v)),S+a-r>h)throw TypeError(b);for(c=o(I,r),d=0;d<r;d++)p=v+d,p in I&&u(c,d,I[p]);if(c.length=r,a<r){for(d=v;d<S-r;d++)p=d+r,f=d+a,p in I?I[f]=I[p]:delete I[f];for(d=S;d>S-r+a;d--)delete I[d-1]}else if(a>r)for(d=S-r;d>v;d--)p=d+r-1,f=d+a-1,p in I?I[f]=I[p]:delete I[f];for(d=0;d<a;d++)I[d+v]=arguments[d+2];return I.length=S-r+a,c}})},a630:function(e,t,a){var r=a("23e7"),s=a("4df4"),n=a("1c7e"),i=!n((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:i},{from:s})},ae6a:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"item"},[a("Category",{attrs:{show:0!=e.selectCar},on:{getCategoryID:e.getBaseAttr}})],1)]),a("el-card",{staticClass:"box-card"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.selectCar,expression:"selectCar==0"}]},[a("el-button",{staticStyle:{"margin-bottom":"15px"},attrs:{type:"primary",plain:"",icon:"el-icon-plus",disabled:!e.category3Id},on:{click:e.openAddAttrCar}},[e._v("SPU属性")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isShowLoading,expression:"isShowLoading"}],staticStyle:{width:"100%"},attrs:{border:"",data:e.pageInfo.records}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80",align:"center"}}),a("el-table-column",{attrs:{prop:"spuName",label:"Spu属性名称",width:"220",align:"center"}}),a("el-table-column",{attrs:{prop:"description",label:"Spu属性描述",align:"center"}}),a("el-table-column",{attrs:{prop:"address",label:"操作",width:"300",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-plus",title:"添加SKU属性"},on:{click:function(t){return e.openAddSkuAttrCar(r)}}}),a("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-edit",title:"修改SPU属性"},on:{click:function(t){return e.openEidtAttrCar(r)}}}),a("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-info",title:"查看SPU属性的实例"},on:{click:function(t){return e.viewSpuCase(r)}}}),a("el-popconfirm",{staticStyle:{"margin-left":"10px"},attrs:{title:"这是一段内容确定删除吗？"},on:{onConfirm:function(t){return e.reMoveAttr(r)}}},[a("el-button",{attrs:{slot:"reference",type:"danger",size:"mini",icon:"el-icon-delete",title:"删除SPU属性"},slot:"reference"})],1)]}}])})],1),a("div",{staticClass:"block"},[a("span",{staticClass:"demonstration"}),a("el-pagination",{staticStyle:{"text-align":"center","margin-top":"30px"},attrs:{"current-page":e.pageInfo.current,"page-sizes":[3,5,8,10],"page-size":e.pageInfo.size,layout:"prev, pager, next, jumper,->,sizes,total",total:e.pageInfo.total},on:{"size-change":e.handleSizeChange,"current-change":e.currentChange}})],1)],1),a("spuForm",{directives:[{name:"show",rawName:"v-show",value:1==e.selectCar,expression:"selectCar==1"}],ref:"spu",attrs:{category3Id:this.category3Id},on:{showHome:e.showHome}}),a("skuForm",{directives:[{name:"show",rawName:"v-show",value:2==e.selectCar,expression:"selectCar==2"}],ref:"sku",on:{showHome:e.showHome}})],1),a("el-dialog",{attrs:{title:e.spuCaseName+"的sku列表",visible:e.spuCaseDialog},on:{"update:visible":function(t){e.spuCaseDialog=t},closed:e.closeSpuCaseDialog}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.skuList.length<1,expression:"skuList.length<1"}],attrs:{data:e.skuList}},[a("el-table-column",{attrs:{property:"skuName",label:"名称"}}),a("el-table-column",{attrs:{property:"price",label:"价格"}}),a("el-table-column",{attrs:{property:"weight",label:"重量"}}),a("el-table-column",{attrs:{property:"address",label:"默认图片"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[a("img",{staticStyle:{height:"80px"},attrs:{src:t.skuDefaultImg}})]}}])})],1)],1)],1)},s=[],n=a("c7eb"),i=a("1da1"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{"label-width":"74px"}},[a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"SPU名称:"}},[a("el-input",{attrs:{placeholder:"请输入SPU名称"},model:{value:e.SPUform.spuName,callback:function(t){e.$set(e.SPUform,"spuName",t)},expression:"SPUform.spuName"}})],1),a("el-form-item",{attrs:{label:"SPU品牌"}},[a("el-select",{attrs:{placeholder:"请选择名牌"},model:{value:e.SPUform.tmId,callback:function(t){e.$set(e.SPUform,"tmId",t)},expression:"SPUform.tmId"}},e._l(this.spuTradeMarkAttr,(function(e){return a("el-option",{key:e.id,attrs:{label:e.tmName,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"SPU描述"}},[a("el-input",{attrs:{placeholder:"请输入SPU描述",type:"textarea",rows:4},model:{value:e.SPUform.description,callback:function(t){e.$set(e.SPUform,"description",t)},expression:"SPUform.description"}})],1),a("el-form-item",{attrs:{label:"SPU图片"}},[a("el-upload",{attrs:{action:"/admin/product/upload","list-type":"picture-card","file-list":e.SPUform.spuImageList,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.handleSuccess}},[a("i",{staticClass:"el-icon-plus"})]),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"50%",src:e.dialogImageUrl}})])],1),a("el-form-item",{attrs:{label:"销售属性"}},[a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:e.SPUform.spuSaleAttrList.length>2?"无属性可选,不可再添加":"还有"+e.notSelected.length+"个属性未选择","value-key":""},model:{value:e.attrID,callback:function(t){e.attrID=t},expression:"attrID "}},e._l(e.notSelected,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-plus",disabled:!e.attrID||e.SPUform.spuSaleAttrList.length>2},on:{click:e.addSaleAttr}},[e._v("添加销售属性")]),a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.SPUform.spuSaleAttrList}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"100",align:"center"}}),a("el-table-column",{attrs:{prop:"saleAttrName",label:"属性名",width:"180",align:"center"}}),a("el-table-column",{attrs:{prop:"prop",label:"属性值",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._l(r.spuSaleAttrValueList,(function(t){return a("el-tag",{key:t.id,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return e.handleClose(r,t)}}},[e._v(" "+e._s(t.saleAttrValueName)+" ")])})),r.isChecked?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:function(t){return e.handleInputConfirm(r)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:t.target.blur(t)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(t){return e.showInput(r)}}},[e._v("+添加")])]}}])}),a("el-table-column",{attrs:{prop:"operation",label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(t){return e.deleteSaleAttr(r)}}},[e._v("删除")])]}}])})],1)],1)],1),a("div",{staticStyle:{"margin-left":"45%"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.saveOrEditSpuAttr}},[e._v("保 存")]),a("el-button",{staticStyle:{"margin-left":"50px"},on:{click:function(t){return e.returnHome(e.flag=0)}}},[e._v("取 消")])],1)],1)},o=[],u=(a("d3b7"),a("159b"),a("b0c0"),a("4de4"),a("a434"),a("a4d3"),a("e01a"),{name:"SpuForm",data:function(){return{attrID:"",inputValue:"",dialogImageUrl:"",dialogVisible:!1,spuTradeMarkAttr:[],saleAttrList:[],SPUform:{category3Id:"",spuName:"",description:"",tmId:"",spuImageList:[],spuSaleAttrList:[]}}},props:["category3Id"],methods:{planEditSpuCar:function(e){var t=this;return Object(i["a"])(Object(n["a"])().mark((function a(){var r,s,i;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$API.spu.reqGetSpuByIdInfo(e.id);case 2:return r=a.sent,a.next=5,t.$API.spu.reqGetSpuImageList(e.id);case 5:s=a.sent,200==r.code&&200==s.code&&(t.SPUform=r.data,i=s.data,i.forEach((function(e){e.url=e.imgUrl,e.name=e.imgName})),t.SPUform.spuImageList=i),t.planAddSpuCar();case 8:case"end":return a.stop()}}),a)})))()},planAddSpuCar:function(){var e=this;return Object(i["a"])(Object(n["a"])().mark((function t(){var a,r;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.SPUform.category3Id=e.category3Id,t.next=3,e.$API.spu.reqGetTradeMarkList();case 3:return a=t.sent,t.next=6,e.$API.spu.reqBaseGetSaleAttrList();case 6:r=t.sent,200==a.code&&200==r.code&&(e.spuTradeMarkAttr=a.data,e.saleAttrList=r.data);case 8:case"end":return t.stop()}}),t)})))()},handleRemove:function(e,t){this.SPUform.spuImageList=t},handlePictureCardPreview:function(e){this.dialogImageUrl=e.imgUrl,this.dialogVisible=!0},handleSuccess:function(e,t,a){a[a.length-1].imgName=a[a.length-1].name,a[a.length-1].imgUrl=a[a.length-1].response.data,this.SPUform.spuImageList=a},addSaleAttr:function(){var e=this,t=this.saleAttrList.filter((function(t){return e.attrID==t.id}));this.SPUform.spuSaleAttrList.push({saleAttrName:t[0].name,baseSaleAttrId:t[0].id,spuSaleAttrValueList:[]}),this.attrID=""},deleteSaleAttr:function(e){this.SPUform.spuSaleAttrList.splice(this.SPUform.spuSaleAttrList.indexOf(e),1)},handleClose:function(e,t){e.spuSaleAttrValueList.splice(e.spuSaleAttrValueList.indexOf(t),1)},showInput:function(e){var t=this;this.$set(e,"isChecked",!0),this.$nextTick((function(){t.$refs.saveTagInput.focus()}))},handleInputConfirm:function(e){var t=this;if(this.inputValue){var a=e.spuSaleAttrValueList.some((function(e){return t.inputValue==e.saleAttrValueName}));a?this.$message({type:"warning",message:"不能设置相同的属性值"}):e.spuSaleAttrValueList.push({baseSaleAttrId:e.baseSaleAttrId,saleAttrName:e.saleAttrName,saleAttrValueName:this.inputValue})}else this.$message({type:"error",message:"属性值不能为空"});e.isChecked=!1,this.inputValue=""},returnHome:function(e){e?this.$emit("showHome",e):this.$emit("showHome");this.attrID,this.inputValue,this.dialogImageUrl,this.dialogVisible,this.spuTradeMarkAttr,this.saleAttrList;this.SPUform={category3Id:"",spuName:"",description:"",tmId:"",spuImageList:[],spuSaleAttrList:[]}},saveOrEditSpuAttr:function(){var e=this;return Object(i["a"])(Object(n["a"])().mark((function t(){var a,r;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.SPUform.spuName&&e.SPUform.description&&e.SPUform.tmId)){t.next=14;break}if(!e.SPUform.id){t.next=8;break}return t.next=4,e.$API.spu.reqEditSpuAttr(e.SPUform);case 4:a=t.sent,200==a.code?(e.$message({type:"success",message:"修改成功"}),e.returnHome()):(e.$message({type:"warning",message:"修改失败，请重新修改"}),e.returnHome()),t.next=12;break;case 8:return t.next=10,e.$API.spu.reqSaveSpuAttr(e.SPUform);case 10:r=t.sent,200==r.code?(e.$message({type:"success",message:"保存成功"}),e.returnHome(1)):(e.$message({type:"warning",message:"保存失败，请重新保存"}),e.returnHome());case 12:t.next=15;break;case 14:e.$message({type:"error",message:"名称，名牌，描述都不能为空"});case 15:case"end":return t.stop()}}),t)})))()}},computed:{notSelected:function(){var e=this;return this.saleAttrList.filter((function(t){return e.SPUform.spuSaleAttrList.every((function(e){return t.name!=e.saleAttrName}))}))}}}),c=u,d=(a("e228"),a("2877")),p=Object(d["a"])(c,l,o,!1,null,null,null),f=p.exports,m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{attrs:{"label-width":"78px"}},[a("el-form-item",{attrs:{label:"SPU名称:"}},[a("span",{staticStyle:{"font-size":"18px"}},[e._v(e._s(e.spuName))])]),a("el-form-item",{attrs:{label:"SKU名称"}},[a("el-input",{model:{value:e.skuInfo.skuName,callback:function(t){e.$set(e.skuInfo,"skuName",t)},expression:"skuInfo.skuName"}})],1),a("el-form-item",{attrs:{label:"价格(元)"}},[a("el-input",{model:{value:e.skuInfo.price,callback:function(t){e.$set(e.skuInfo,"price",t)},expression:"skuInfo.price"}})],1),a("el-form-item",{attrs:{label:"重量(千克)"}},[a("el-input",{model:{value:e.skuInfo.weight,callback:function(t){e.$set(e.skuInfo,"weight",t)},expression:"skuInfo.weight"}})],1),a("el-form-item",{attrs:{label:"规格描述"}},[a("el-input",{attrs:{type:"textarea",rows:"4"},model:{value:e.skuInfo.skuDesc,callback:function(t){e.$set(e.skuInfo,"skuDesc",t)},expression:"skuInfo.skuDesc"}})],1),a("el-form-item",{attrs:{label:"平台属性"}},[a("el-form",{attrs:{inline:!0,"label-width":"100px"}},e._l(e.attrInfoList,(function(t){return a("el-form-item",{key:t.id,attrs:{label:t.attrName}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.attrIdAndValueId,callback:function(a){e.$set(t,"attrIdAndValueId",a)},expression:"infoItem.attrIdAndValueId"}},e._l(t.attrValueList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.valueName,value:t.id+":"+e.id}})})),1)],1)})),1)],1),a("el-form-item",{attrs:{label:"销售属性"}},[a("el-form",{attrs:{inline:!0,"label-width":"100px"}},e._l(e.saleAttrList,(function(t){return a("el-form-item",{key:t.id,attrs:{label:t.saleAttrName}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.saleAttrIdAndsaleAttrValueId,callback:function(a){e.$set(t,"saleAttrIdAndsaleAttrValueId",a)},expression:"saleItem.saleAttrIdAndsaleAttrValueId"}},e._l(t.spuSaleAttrValueList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.saleAttrValueName,value:t.id+":"+e.id}})})),1)],1)})),1)],1),a("el-form-item",{attrs:{label:"图片列表"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.skuImgInfo},on:{"selection-change":e.selectionChange}},[a("el-table-column",{attrs:{type:"selection",label:"label",width:"65",align:"center"}}),a("el-table-column",{attrs:{prop:"prop",label:"图片",align:"center",width:"460"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[a("img",{staticStyle:{height:"80px"},attrs:{src:t.imgUrl,title:t.imgName}})]}}])}),a("el-table-column",{attrs:{prop:"imgName",label:"名称",align:"center"}}),a("el-table-column",{attrs:{prop:"address",label:"操作",width:"300",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[0==r.isDefault?a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.changeDefault(r)}}},[e._v("设置默认")]):a("el-tag",{attrs:{type:"success","disable-transitions":""}},[e._v("默认")])]}}])})],1)],1),a("el-form-item",{staticStyle:{"margin-left":"38%"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.saveSku}},[e._v("保存")]),a("el-button",{staticStyle:{"margin-left":"50px"},attrs:{type:"info"},on:{click:e.returnHome}},[e._v(" 返回")])],1)],1)],1)},g=[];function h(e){if(Array.isArray(e))return e}a("d28b"),a("3ca3"),a("ddb0");function b(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,s,n,i,l=[],o=!0,u=!1;try{if(n=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;o=!1}else for(;!(o=(r=n.call(a)).done)&&(l.push(r.value),l.length!==t);o=!0);}catch(c){u=!0,s=c}finally{try{if(!o&&null!=a["return"]&&(i=a["return"](),Object(i)!==i))return}finally{if(u)throw s}}return l}}var I=a("06c5");function S(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function v(e,t){return h(e)||b(e,t)||Object(I["a"])(e,t)||S()}a("d81d");var k={name:"SkuForm",data:function(){return{spuName:"",skuImgInfo:[],saleAttrList:[],attrInfoList:[],skuInfo:{category3Id:"",price:"",spuId:"",tmId:"",skuDefaultImg:"",skuDesc:"",skuName:"",weight:"",skuAttrValueList:[],skuImageList:[],skuSaleAttrValueList:[]}}},methods:{planEditSku:function(e,t,a){var r=this;return Object(i["a"])(Object(n["a"])().mark((function s(){var i,l,o,u;return Object(n["a"])().wrap((function(s){while(1)switch(s.prev=s.next){case 0:return r.skuInfo.category3Id=a.category3Id,r.skuInfo.tmId=a.tmId,r.skuInfo.spuId=a.id,r.spuName=a.spuName,s.next=6,r.$API.spu.reqGetSpuImageList(a.id);case 6:return i=s.sent,s.next=9,r.$API.spu.reqSpuGetSaleAttrList(a.id);case 9:return l=s.sent,s.next=12,r.$API.spu.reqGetAttrInfoList(e,t,a.category3Id);case 12:o=s.sent,200==i.code&&200==l.code&&200==o.code&&(u=i.data,u.forEach((function(e){e.isDefault=0})),r.skuImgInfo=u,r.saleAttrList=l.data,r.attrInfoList=o.data);case 14:case"end":return s.stop()}}),s)})))()},selectionChange:function(e){this.skuInfo.skuImageList=e},changeDefault:function(e){this.skuImgInfo.forEach((function(e){e.isDefault=0})),e.isDefault=1,this.skuInfo.skuDefaultImg=e.imgUrl},saveSku:function(){var e=this;return Object(i["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.attrInfoList.forEach((function(t){if(t.attrIdAndValueId){var a=t.attrIdAndValueId.split(":"),r=v(a,2),s=r[0],n=r[1];e.skuInfo.skuAttrValueList.push({attrId:s,valueId:n})}})),e.saleAttrList.forEach((function(t){if(t.saleAttrIdAndsaleAttrValueId){var a=t.saleAttrIdAndsaleAttrValueId.split(":"),r=v(a,2),s=r[0],n=r[1];e.skuInfo.skuSaleAttrValueList.push({saleAttrId:s,saleAttrValueId:n})}})),e.skuInfo.skuImageList=e.skuInfo.skuImageList.map((function(e){return{imgName:e.imgName,imgUrl:e.imgUrl,isDefault:e.isDefault,spuImgId:e.id}})),t.next=5,e.$API.spu.reqSaveSkuInfo(e.skuInfo);case 5:a=t.sent,200==a.code?e.$message({type:"success",message:"保存成功"}):e.$message({type:"warning",message:"保存失败,请稍后重试"}),e.returnHome();case 8:case"end":return t.stop()}}),t)})))()},returnHome:function(){this.$emit("showHome"),Object.assign(this._data,this.$options.data())}}},A=k,y=Object(d["a"])(A,m,g,!1,null,null,null),w=y.exports,x={name:"SPU",data:function(){return{isShowLoading:!1,spuCaseName:"",spuCaseDialog:!1,skuList:[],category1Id:"",category2Id:"",category3Id:"",selectCar:0,pageInfo:{current:1,size:3,pages:String,records:[],searchCount:Boolean,total:null}}},components:{spuForm:f,skuForm:w},methods:{getBaseAttr:function(e){this.category1Id=e.category1Id,this.category2Id=e.category2Id,e.category3Id?(this.category3Id=e.category3Id,this.getBaseSaleAttrList()):this.pageInfo.records=[]},getBaseSaleAttrList:function(){var e=this;return Object(i["a"])(Object(n["a"])().mark((function t(){var a;return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isShowLoading=!0,t.next=3,e.$API.spu.reqBaseSaleAttrList(e.pageInfo.current,e.pageInfo.size,e.category3Id);case 3:a=t.sent,200==a.code&&(e.isShowLoading=!1,e.pageInfo=a.data);case 5:case"end":return t.stop()}}),t)})))()},handleSizeChange:function(e){this.pageInfo.size=e,this.getBaseSaleAttrList()},currentChange:function(e){this.pageInfo.current=e,this.getBaseSaleAttrList()},openEidtAttrCar:function(e){this.selectCar=1,this.$refs.spu.planEditSpuCar(e)},openAddAttrCar:function(e){this.selectCar=1,this.$refs.spu.planAddSpuCar(e)},openAddSkuAttrCar:function(e){this.selectCar=2,this.$refs.sku.planEditSku(this.category1Id,this.category2Id,e)},showHome:function(e){this.selectCar=0,e&&(this.pageInfo.current=e),this.getBaseSaleAttrList()},reMoveAttr:function(e){var t=this;return Object(i["a"])(Object(n["a"])().mark((function a(){var r;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$API.spu.reqDeleteSpuAttr(e.id);case 2:r=a.sent,200==r.code?(t.$message({type:"success",message:"删除成功"}),t.pageInfo.records.length<1&&1!=t.pageInfo.current?(t.pageInfo.current--,t.getBaseSaleAttrList()):t.getBaseSaleAttrList()):t.$message({type:"warning",message:"删除失败"});case 4:case"end":return a.stop()}}),a)})))()},viewSpuCase:function(e){var t=this;return Object(i["a"])(Object(n["a"])().mark((function a(){var r;return Object(n["a"])().wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.spuCaseDialog=!0,t.spuCaseName=e.spuName,a.next=4,t.$API.spu.reqSpuCaseList(e.id);case 4:r=a.sent,200==r.code&&(t.skuList=r.data);case 6:case"end":return a.stop()}}),a)})))()},closeSpuCaseDialog:function(){this.skuList=[]}}},L=x,C=(a("ff98"),Object(d["a"])(L,r,s,!1,null,null,null));t["default"]=C.exports},d978:function(e,t,a){},e228:function(e,t,a){"use strict";a("d978")},ff98:function(e,t,a){"use strict";a("82d7")}}]);